<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Eliminación Gaussiana</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    body {
      background: #f8f9fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    h1, h5 {
      font-weight: 600;
      color: #0d6efd;
    }
    .card {
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .btn-primary {
      border-radius: 50px;
      padding: 0.6rem 1.5rem;
    }
    .btn-secondary {
      border-radius: 50px;
      padding: 0.6rem 1.5rem;
    }
    .breadcrumb {
      background: white;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    input.form-control {
      border-radius: 0.6rem;
    }
  </style>
</head>

<script th:inline="javascript">
function crearMatriz() {
  var dimension = parseInt(document.getElementById('dimension').value || "0");
  if (![2,3,4].includes(dimension)) {
    alert("El tamaño debe ser 2, 3 o 4");
    return;
  }
  var containerA = document.getElementById('MatrixContainer');
  var containerB = document.getElementById('IndependentContainer');
  containerA.replaceChildren();
  containerB.replaceChildren();

  for (let j = 1; j <= dimension; j++) {
    let rowA = document.createElement('div');
    rowA.className = "row g-2 mb-2";
    containerA.appendChild(rowA);

    for (let i = 1; i <= dimension; i++) {
      let colA = document.createElement('div');
      colA.className = "col";
      rowA.appendChild(colA);

      let coef = document.createElement('input');
      coef.type = 'number';
      coef.step = 'any';
      coef.name = 'matrizCoeficientes[]';
      coef.placeholder = 'a' + j + i;
      coef.className = "form-control";
      colA.appendChild(coef);
    }

    let rowB = document.createElement('div');
    rowB.className = "row g-2 mb-2";
    containerB.appendChild(rowB);

    let colB = document.createElement('div');
    colB.className = "col";
    rowB.appendChild(colB);

    let vb = document.createElement('input');
    vb.type = 'number';
    vb.step = 'any';
    vb.name = 'vectorTerminosIndependientes[]';
    vb.placeholder = 'b' + j;
    vb.className = "form-control";
    colB.appendChild(vb);
  }

  document.getElementById('resolver').style.display = 'block';
}
</script>

<body>
<div class="container py-4">
  <nav th:replace="/layout/template :: menu"></nav>
  <div th:replace="/layout/template :: bannerunit3"></div>

  <nav aria-label="breadcrumb" class="mt-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a th:href="@{/}">Inicio</a></li>
      <li class="breadcrumb-item"><a th:href="@{/unit3}">Sistemas Lineales</a></li>
      <li class="breadcrumb-item active" aria-current="page">Eliminación Gaussiana</li>
    </ol>
  </nav>

  <div class="card p-4 mt-3">
    <form class="row g-3" th:action="@{/unit3/solvegauss}" method="post" th:object="${modelGauss}">
      <div class="col-12 text-center">
        <h1>Eliminación Gaussiana</h1>
        <p class="text-muted">Ingresa el tamaño (<strong>2</strong>, <strong>3</strong> o <strong>4</strong>) y los coeficientes de la matriz.</p>
      </div>

      <div class="col-md-3">
        <label for="dimension" class="form-label fw-semibold">Dimensión (n)</label>
        <input type="number" min="2" max="4" class="form-control" id="dimension" name="dimension" />
      </div>

      <div class="col-12">
        <button type="button" class="btn btn-secondary" onclick="crearMatriz()">➕ Crear Matriz</button>
      </div>

      <div class="row mt-4">
        <div class="col-md-8">
          <h5 class="mb-3">Matriz A</h5>
          <div id="MatrixContainer" class="p-3 bg-light rounded"></div>
        </div>
        <div class="col-md-4">
          <h5 class="mb-3">Vector b</h5>
          <div id="IndependentContainer" class="p-3 bg-light rounded"></div>
        </div>
      </div>

      <div id="resolver" class="col-12 text-center mt-4" style="display:none;">
        <button type="submit" class="btn btn-primary shadow">⚡ Resolver</button>
      </div>
    </form>
  </div>
</div>
</body>
</html>
